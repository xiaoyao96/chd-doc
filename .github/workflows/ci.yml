name: CI
# ç›‘å¬è¡Œä¸º
on:
  #ç›‘å¬æ¨ä»£ç 
  push:
    #ç›‘å¬çš„åˆ†æ”¯å
    branches: main
# å·¥ä½œæµ
jobs:
  # å·¥ä½œåç§°
  CI:
    # githubæä¾›çš„æœåŠ¡å™¨å
    runs-on: ubuntu-latest
    # è„šæœ¬æ­¥éª¤ æ¯ä¸ªæ¨ªæ†ä¸ºä¸€ä¸ªæ­¥éª¤ æŒ‰é¡ºåºæ‰§è¡Œ
    steps:
      # æ­¥éª¤åè·å–æœ€æ–°ä»£ç 
      - name: ğŸšš Get latest code
        uses: actions/checkout@v3
      # å®‰è£…nodeç¯å¢ƒ
      - name: Use Node.js 18
        uses: actions/setup-node@v3
        with:
          node-version: "18.x"
      - name: Installing Dependencies
        run: npm install
      # éƒ¨ç½²å‰ç«¯å·¥ç¨‹
      - name: Build Project
        run: npm run docs:build
      # ftpä¼ è¾“åˆ°äº‘æœåŠ¡å™¨
      - name: FTP Deploy
        uses: SamKirkland/FTP-Deploy-Action@2.0.0
        env:
          FTP_SERVER: ${{ secrets.D_HOST }}
          FTP_USERNAME: ${{ secrets.D_USER }}
          FTP_PASSWORD: ${{ secrets.D_PASS }}
          LOCAL_DIR: .vitepress/dist
          REMOTE_DIR: chd-doc
          METHOD: ftp
          PORT: 21
          ARGS: --delete
